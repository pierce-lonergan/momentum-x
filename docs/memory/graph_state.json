{
  "protocol": "TOR-P",
  "version": "S006",
  "last_updated": "2026-02-02T05:00:00Z",

  "nodes": {
    "config.settings": {"type": "CONFIG", "file": "config/settings.py", "status": "COMPLETE"},
    "core.models": {"type": "MODEL", "file": "src/core/models.py", "status": "COMPLETE"},
    "core.scoring": {"type": "ENGINE", "file": "src/core/scoring.py", "status": "COMPLETE", "tested_by": "tests.unit.test_scoring"},
    "core.orchestrator": {
      "type": "ENGINE", "file": "src/core/orchestrator.py", "status": "COMPLETE",
      "description": "6-agent pipeline with WebSocket VWAP integration (H-006 fully wired)",
      "tested_by": "tests.integration.test_pipeline"
    },
    "core.backtester": {"type": "ENGINE", "file": "src/core/backtester.py", "status": "COMPLETE", "tested_by": "tests.unit.test_backtester"},
    "scanner.premarket": {"type": "SCANNER", "file": "src/scanners/premarket.py", "status": "COMPLETE", "tested_by": "tests.property.test_scanner_properties"},
    "agent.base": {"type": "AGENT", "file": "src/agents/base.py", "status": "COMPLETE"},
    "agent.news": {"type": "AGENT", "file": "src/agents/news_agent.py", "status": "COMPLETE", "tested_by": "tests.unit.test_news_agent"},
    "agent.technical": {"type": "AGENT", "file": "src/agents/technical_agent.py", "status": "COMPLETE", "tested_by": "tests.unit.test_technical_agent"},
    "agent.fundamental": {"type": "AGENT", "file": "src/agents/fundamental_agent.py", "status": "COMPLETE", "tested_by": "tests.unit.test_remaining_agents"},
    "agent.institutional": {"type": "AGENT", "file": "src/agents/institutional_agent.py", "status": "COMPLETE", "tested_by": "tests.unit.test_remaining_agents"},
    "agent.deep_search": {"type": "AGENT", "file": "src/agents/deep_search_agent.py", "status": "COMPLETE", "tested_by": "tests.unit.test_remaining_agents"},
    "agent.risk": {"type": "AGENT", "file": "src/agents/risk_agent.py", "status": "COMPLETE", "tested_by": "tests.unit.test_risk_agent"},
    "agent.debate_engine": {"type": "ENGINE", "file": "src/agents/debate_engine.py", "status": "COMPLETE", "tested_by": "tests.unit.test_debate_engine"},
    "agent.prompt_arena": {
      "type": "ENGINE", "file": "src/agents/prompt_arena.py", "status": "COMPLETE",
      "description": "Elo-based prompt variant tournament. Cold start → exploration; warm → exploitation.",
      "justified_by": "docs/research/PROMPT_ARENA.md",
      "tested_by": "tests.unit.test_prompt_arena",
      "resolves": "H-003"
    },
    "data.alpaca_client": {"type": "DATA_CLIENT", "file": "src/data/alpaca_client.py", "status": "COMPLETE", "tested_by": "tests.unit.test_alpaca_client"},
    "data.news_client": {"type": "DATA_CLIENT", "file": "src/data/news_client.py", "status": "COMPLETE"},
    "data.websocket_client": {
      "type": "DATA_CLIENT", "file": "src/data/websocket_client.py", "status": "COMPLETE",
      "tested_by": "tests.unit.test_websocket",
      "resolves": "H-006"
    },
    "data.sec_client": {
      "type": "DATA_CLIENT", "file": "src/data/sec_client.py", "status": "COMPLETE",
      "description": "SEC EDGAR EFTS client. Dilution detection: S-3→WARNING, 424B5→CRITICAL.",
      "justified_by": "docs/research/SEC_EDGAR_INTEGRATION.md",
      "tested_by": "tests.unit.test_sec_client",
      "resolves": "H-004"
    },
    "execution.alpaca_executor": {"type": "EXECUTOR", "file": "src/execution/alpaca_executor.py", "status": "COMPLETE", "tested_by": "tests.unit.test_executor"},
    "execution.position_manager": {"type": "EXECUTOR", "file": "src/execution/position_manager.py", "status": "COMPLETE", "tested_by": "tests.unit.test_executor"},
    "execution.slippage": {
      "type": "ENGINE", "file": "src/execution/slippage.py", "status": "COMPLETE",
      "description": "Almgren-Chriss slippage: fixed + √(Q/V)×σ + spread. 5% cap.",
      "justified_by": "docs/mathematics/MOMENTUM_LOGIC.md §11",
      "tested_by": "tests.unit.test_slippage",
      "resolves": "H-009"
    },
    "utils.rate_limiter": {"type": "ENGINE", "file": "src/utils/rate_limiter.py", "status": "COMPLETE", "tested_by": "tests.unit.test_rate_limiter"},
    "utils.trade_filter": {"type": "ENGINE", "file": "src/utils/trade_filter.py", "status": "COMPLETE", "tested_by": "tests.unit.test_rate_limiter"},
    "cli.main": {"type": "CONFIG", "file": "main.py", "status": "COMPLETE"},
    "dx.readme": {"type": "CONFIG", "file": "README.md", "status": "COMPLETE"},
    "dx.docker": {"type": "CONFIG", "file": "Dockerfile", "status": "COMPLETE"},
    "dx.makefile": {"type": "CONFIG", "file": "Makefile", "status": "COMPLETE"},
    "dx.env_template": {"type": "CONFIG", "file": ".env.example", "status": "COMPLETE"},
    "dx.contributing": {"type": "CONFIG", "file": "CONTRIBUTING.md", "status": "COMPLETE"},
    "ci.github_actions": {
      "type": "CONFIG", "file": ".github/workflows/ci.yml", "status": "COMPLETE",
      "description": "GitHub Actions CI: Python 3.11+3.12 matrix, lint, format, test, typecheck",
      "justified_by": "ADR-006"
    },
    "ci.pre_commit": {
      "type": "CONFIG", "file": ".pre-commit-config.yaml", "status": "COMPLETE",
      "description": "Pre-commit hooks: ruff, detect-secrets, detect-private-key, large files",
      "justified_by": "ADR-006"
    }
  },

  "edges": [
    {"from": "scanner.premarket", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.news", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.technical", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.fundamental", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.institutional", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.deep_search", "to": "core.scoring", "type": "feeds_into"},
    {"from": "core.scoring", "to": "agent.debate_engine", "type": "feeds_into"},
    {"from": "agent.debate_engine", "to": "agent.risk", "type": "feeds_into"},
    {"from": "agent.risk", "to": "execution.alpaca_executor", "type": "vetoes"},
    {"from": "data.alpaca_client", "to": "scanner.premarket", "type": "feeds_into"},
    {"from": "data.websocket_client", "to": "core.orchestrator", "type": "feeds_into"},
    {"from": "data.news_client", "to": "agent.news", "type": "feeds_into"},
    {"from": "data.sec_client", "to": "agent.fundamental", "type": "feeds_into"},
    {"from": "data.sec_client", "to": "agent.deep_search", "type": "feeds_into"},
    {"from": "config.settings", "to": "data.alpaca_client", "type": "configured_by"},
    {"from": "utils.rate_limiter", "to": "data.alpaca_client", "type": "implements"},
    {"from": "utils.trade_filter", "to": "data.websocket_client", "type": "implements"},
    {"from": "execution.slippage", "to": "core.backtester", "type": "feeds_into"},
    {"from": "agent.prompt_arena", "to": "agent.news", "type": "optimizes"},
    {"from": "agent.prompt_arena", "to": "agent.technical", "type": "optimizes"},
    {"from": "core.orchestrator", "to": "agent.news", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.technical", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.fundamental", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.institutional", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.deep_search", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.risk", "type": "dispatches"},
    {"from": "cli.main", "to": "core.orchestrator", "type": "depends_on"}
  ],

  "adrs": ["ADR-001", "ADR-002", "ADR-003", "ADR-004", "ADR-005", "ADR-006"],
  "research_docs": ["BIBLIOGRAPHY.md", "ALPACA_API_CONSTRAINTS.md", "SEC_EDGAR_INTEGRATION.md", "PROMPT_ARENA.md"]
}
