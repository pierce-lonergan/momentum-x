{
    "protocol": "TOR-P",
    "version": "S013",
    "last_updated": "2026-02-02T11:00:00Z",
    "nodes": {
        "config.settings": {"type": "CONFIG", "file": "config/settings.py", "status": "COMPLETE"},
        "core.models": {"type": "MODEL", "file": "src/core/models.py", "status": "COMPLETE"},
        "core.scoring": {"type": "ENGINE", "file": "src/core/scoring.py", "status": "COMPLETE"},
        "core.orchestrator": {"type": "ENGINE", "file": "src/core/orchestrator.py", "status": "COMPLETE"},
        "core.backtester": {"type": "ENGINE", "file": "src/core/backtester.py", "status": "COMPLETE", "pending_upgrade": "DSR/PBO metrics from BacktestMetrics class"},
        "core.llm_leakage": {"type": "ENGINE", "file": "src/core/llm_leakage.py", "status": "COMPLETE", "tests": 27, "description": "KnowledgeCutoffRegistry, LeakageDetector, CounterfactualSimulator (IDS), CachedAgentWrapper. §18."},
        "scanner.premarket": {"type": "SCANNER", "file": "src/scanners/premarket.py", "status": "COMPLETE", "pending_upgrade": "Integrate GEX hard filter into scan_premarket_gappers()"},
        "scanner.gex": {"type": "SCANNER", "file": "src/scanners/gex.py", "status": "COMPLETE", "tests": 23, "description": "GEXCalculator, OptionsChainEntry, GEXResult, SyntheticOptionsProvider, regime classification. §19."},
        "agent.base": {"type": "AGENT", "file": "src/agents/base.py", "status": "COMPLETE"},
        "agent.news": {"type": "AGENT", "file": "src/agents/news_agent.py", "status": "COMPLETE"},
        "agent.technical": {"type": "AGENT", "file": "src/agents/technical_agent.py", "status": "COMPLETE"},
        "agent.fundamental": {"type": "AGENT", "file": "src/agents/fundamental_agent.py", "status": "COMPLETE"},
        "agent.institutional": {"type": "AGENT", "file": "src/agents/institutional_agent.py", "status": "COMPLETE", "pending_upgrade": "GEX soft signal injection into prompt"},
        "agent.deep_search": {"type": "AGENT", "file": "src/agents/deep_search_agent.py", "status": "COMPLETE"},
        "agent.risk": {"type": "AGENT", "file": "src/agents/risk_agent.py", "status": "COMPLETE"},
        "agent.debate_engine": {"type": "ENGINE", "file": "src/agents/debate_engine.py", "status": "COMPLETE"},
        "agent.prompt_arena": {"type": "ENGINE", "file": "src/agents/prompt_arena.py", "status": "COMPLETE", "pending_upgrade": "Shapley-based Elo updates via shapley_to_elo_scores()"},
        "analysis.post_trade": {"type": "ANALYSIS", "file": "src/analysis/post_trade.py", "status": "COMPLETE", "pending_upgrade": "Wire ShapleyAttributor into analyze() for non-binary credit"},
        "analysis.shapley": {"type": "ANALYSIS", "file": "src/analysis/shapley.py", "status": "COMPLETE", "tests": 21, "description": "ShapleyAttributor: exact 2^n coalitions, threshold_aware + proportional modes, Shapley-to-Elo. §17."},
        "execution.slippage": {"type": "ENGINE", "file": "src/execution/slippage.py", "status": "COMPLETE"},
        "execution.position_manager": {"type": "ENGINE", "file": "src/execution/position_manager.py", "status": "COMPLETE"},
        "execution.alpaca_client": {"type": "CLIENT", "file": "src/execution/alpaca_client.py", "status": "COMPLETE"},
        "utils.logging": {"type": "UTILITY", "file": "src/utils/logging.py", "status": "COMPLETE"},
        "cli.main": {"type": "CLI", "file": "src/cli/main.py", "status": "COMPLETE"}
    },
    "edges": [
        {"from": "scanner.premarket", "to": "core.orchestrator", "type": "feeds_into"},
        {"from": "scanner.gex", "to": "scanner.premarket", "type": "extends_filter"},
        {"from": "scanner.gex", "to": "agent.institutional", "type": "soft_signal"},
        {"from": "core.orchestrator", "to": "agent.base", "type": "dispatches"},
        {"from": "core.orchestrator", "to": "agent.debate_engine", "type": "triggers"},
        {"from": "agent.prompt_arena", "to": "agent.base", "type": "selects_variant"},
        {"from": "core.scoring", "to": "core.orchestrator", "type": "computes_mfcs"},
        {"from": "core.orchestrator", "to": "execution.position_manager", "type": "opens_position"},
        {"from": "execution.position_manager", "to": "execution.alpaca_client", "type": "executes_via"},
        {"from": "execution.slippage", "to": "execution.position_manager", "type": "adjusts"},
        {"from": "core.backtester", "to": "core.scoring", "type": "evaluates"},
        {"from": "core.llm_leakage", "to": "core.backtester", "type": "validates"},
        {"from": "core.llm_leakage", "to": "agent.base", "type": "wraps_cache"},
        {"from": "utils.logging", "to": "core.orchestrator", "type": "observes"},
        {"from": "core.orchestrator", "to": "analysis.post_trade", "type": "feeds_into"},
        {"from": "analysis.post_trade", "to": "agent.prompt_arena", "type": "updates_elo"},
        {"from": "analysis.shapley", "to": "analysis.post_trade", "type": "replaces_binary"},
        {"from": "analysis.shapley", "to": "agent.prompt_arena", "type": "feeds_elo"},
        {"from": "cli.main", "to": "analysis.post_trade", "type": "dispatches"}
    ],
    "adrs": ["ADR-001","ADR-002","ADR-003","ADR-004","ADR-005","ADR-006","ADR-007","ADR-008","ADR-009","ADR-010","ADR-011","ADR-012"],
    "research_docs": ["BIBLIOGRAPHY.md","ALPACA_API_CONSTRAINTS.md","SEC_EDGAR_INTEGRATION.md","PROMPT_ARENA.md","ARENA_LIVE_SELECTION.md","POST_TRADE_ANALYSIS.md","SHAPLEY_ATTRIBUTION.md","CPCV_LLM_LEAKAGE.md","GEX_GAMMA_EXPOSURE.md"],
    "math_sections": ["§1-§19"],
    "test_count": 359
}
