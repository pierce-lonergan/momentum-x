{
  "protocol": "TOR-P",
  "version": "S007",
  "last_updated": "2026-02-02T06:00:00Z",

  "nodes": {
    "config.settings": {"type": "CONFIG", "file": "config/settings.py", "status": "COMPLETE"},
    "core.models": {"type": "MODEL", "file": "src/core/models.py", "status": "COMPLETE"},
    "core.scoring": {"type": "ENGINE", "file": "src/core/scoring.py", "status": "COMPLETE"},
    "core.orchestrator": {
      "type": "ENGINE", "file": "src/core/orchestrator.py", "status": "COMPLETE",
      "description": "6-agent pipeline. WebSocket VWAP (H-006) + SEC auto-query (H-004) wired."
    },
    "core.backtester": {
      "type": "ENGINE", "file": "src/core/backtester.py", "status": "COMPLETE",
      "description": "CPCV backtest with optional slippage model (H-009 wired)"
    },
    "scanner.premarket": {"type": "SCANNER", "file": "src/scanners/premarket.py", "status": "COMPLETE"},
    "agent.base": {"type": "AGENT", "file": "src/agents/base.py", "status": "COMPLETE"},
    "agent.news": {"type": "AGENT", "file": "src/agents/news_agent.py", "status": "COMPLETE"},
    "agent.technical": {"type": "AGENT", "file": "src/agents/technical_agent.py", "status": "COMPLETE"},
    "agent.fundamental": {"type": "AGENT", "file": "src/agents/fundamental_agent.py", "status": "COMPLETE"},
    "agent.institutional": {"type": "AGENT", "file": "src/agents/institutional_agent.py", "status": "COMPLETE"},
    "agent.deep_search": {"type": "AGENT", "file": "src/agents/deep_search_agent.py", "status": "COMPLETE"},
    "agent.risk": {"type": "AGENT", "file": "src/agents/risk_agent.py", "status": "COMPLETE"},
    "agent.debate_engine": {"type": "ENGINE", "file": "src/agents/debate_engine.py", "status": "COMPLETE"},
    "agent.prompt_arena": {"type": "ENGINE", "file": "src/agents/prompt_arena.py", "status": "COMPLETE", "resolves": "H-003"},
    "agent.default_variants": {
      "type": "CONFIG", "file": "src/agents/default_variants.py", "status": "COMPLETE",
      "description": "12 prompt variants (2 per agent) seeded for arena tournament"
    },
    "data.alpaca_client": {"type": "DATA_CLIENT", "file": "src/data/alpaca_client.py", "status": "COMPLETE"},
    "data.news_client": {"type": "DATA_CLIENT", "file": "src/data/news_client.py", "status": "COMPLETE"},
    "data.websocket_client": {"type": "DATA_CLIENT", "file": "src/data/websocket_client.py", "status": "COMPLETE", "resolves": "H-006"},
    "data.sec_client": {"type": "DATA_CLIENT", "file": "src/data/sec_client.py", "status": "COMPLETE", "resolves": "H-004"},
    "data.trade_updates": {
      "type": "DATA_CLIENT", "file": "src/data/trade_updates.py", "status": "COMPLETE",
      "description": "Trade updates WebSocket: fill detection, trailing stop state machine",
      "resolves": "H-008"
    },
    "execution.alpaca_executor": {"type": "EXECUTOR", "file": "src/execution/alpaca_executor.py", "status": "COMPLETE"},
    "execution.position_manager": {"type": "EXECUTOR", "file": "src/execution/position_manager.py", "status": "COMPLETE"},
    "execution.slippage": {"type": "ENGINE", "file": "src/execution/slippage.py", "status": "COMPLETE", "resolves": "H-009"},
    "execution.trailing_stop_manager": {
      "type": "ENGINE", "file": "src/data/trade_updates.py",
      "status": "COMPLETE",
      "description": "TrailingStopManager: PENDING_FILL→CANCELING_STOP→TRAILING_ACTIVE→CLOSED",
      "resolves": "H-008"
    },
    "utils.rate_limiter": {"type": "ENGINE", "file": "src/utils/rate_limiter.py", "status": "COMPLETE"},
    "utils.trade_filter": {"type": "ENGINE", "file": "src/utils/trade_filter.py", "status": "COMPLETE"},
    "cli.main": {"type": "CONFIG", "file": "main.py", "status": "COMPLETE"},
    "dx.readme": {"type": "CONFIG", "file": "README.md", "status": "COMPLETE"},
    "dx.docker": {"type": "CONFIG", "file": "Dockerfile", "status": "COMPLETE"},
    "dx.makefile": {"type": "CONFIG", "file": "Makefile", "status": "COMPLETE"},
    "dx.env_template": {"type": "CONFIG", "file": ".env.example", "status": "COMPLETE"},
    "dx.contributing": {"type": "CONFIG", "file": "CONTRIBUTING.md", "status": "COMPLETE"},
    "ci.github_actions": {"type": "CONFIG", "file": ".github/workflows/ci.yml", "status": "COMPLETE"},
    "ci.pre_commit": {"type": "CONFIG", "file": ".pre-commit-config.yaml", "status": "COMPLETE"}
  },

  "edges": [
    {"from": "scanner.premarket", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.news", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.technical", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.fundamental", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.institutional", "to": "core.scoring", "type": "feeds_into"},
    {"from": "agent.deep_search", "to": "core.scoring", "type": "feeds_into"},
    {"from": "core.scoring", "to": "agent.debate_engine", "type": "feeds_into"},
    {"from": "agent.debate_engine", "to": "agent.risk", "type": "feeds_into"},
    {"from": "agent.risk", "to": "execution.alpaca_executor", "type": "vetoes"},
    {"from": "data.alpaca_client", "to": "scanner.premarket", "type": "feeds_into"},
    {"from": "data.websocket_client", "to": "core.orchestrator", "type": "feeds_into"},
    {"from": "data.news_client", "to": "agent.news", "type": "feeds_into"},
    {"from": "data.sec_client", "to": "core.orchestrator", "type": "feeds_into"},
    {"from": "data.sec_client", "to": "agent.fundamental", "type": "feeds_into"},
    {"from": "data.trade_updates", "to": "execution.trailing_stop_manager", "type": "feeds_into"},
    {"from": "execution.trailing_stop_manager", "to": "execution.alpaca_executor", "type": "coordinates"},
    {"from": "execution.slippage", "to": "core.backtester", "type": "feeds_into"},
    {"from": "agent.prompt_arena", "to": "agent.news", "type": "optimizes"},
    {"from": "agent.prompt_arena", "to": "agent.technical", "type": "optimizes"},
    {"from": "agent.prompt_arena", "to": "agent.fundamental", "type": "optimizes"},
    {"from": "agent.prompt_arena", "to": "agent.institutional", "type": "optimizes"},
    {"from": "agent.prompt_arena", "to": "agent.deep_search", "type": "optimizes"},
    {"from": "agent.prompt_arena", "to": "agent.risk", "type": "optimizes"},
    {"from": "agent.default_variants", "to": "agent.prompt_arena", "type": "seeds"},
    {"from": "core.orchestrator", "to": "agent.news", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.technical", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.fundamental", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.institutional", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.deep_search", "type": "dispatches"},
    {"from": "core.orchestrator", "to": "agent.risk", "type": "dispatches"},
    {"from": "cli.main", "to": "core.orchestrator", "type": "depends_on"}
  ],

  "adrs": ["ADR-001", "ADR-002", "ADR-003", "ADR-004", "ADR-005", "ADR-006", "ADR-007"],
  "research_docs": ["BIBLIOGRAPHY.md", "ALPACA_API_CONSTRAINTS.md", "SEC_EDGAR_INTEGRATION.md", "PROMPT_ARENA.md"]
}
